{% extends 'irish_townlands/townland_base.html' %}
{% load l10n humanize cache %}

{% block title %}Irish Traditional Boundaries Progress Report{% endblock %}
{% block header %}<h1>Irish Traditional Boundaries Progress Report</h1>{% endblock %}

{% block extra_headers %}
    {{ block.super }}
    <style>
        #coverage tbody tr:nth-child(even) {
            background-color: #ebebeb;
        }
        #coverage tbody td {
            padding: 8px 11px;
        }
        #coverage thead tr {
            padding-bottom: 1em;
        }
        #coverage thead td {
            text-align: center;
        }
    </style>
{% endblock %}

{% block body %}
{% cache 3600 progress %}

<ul>
    <li><a href="#countyprogress">Progress of each county ‚Üì</a></li>
    <li><a href="#duplicatenames">Duplicate townland names ‚Üì</a></li>
    <li><a href="#errors">Potential conflicts with the data ‚Üì</a></li>
</ul>

<p>How complete is the data in Open Street Map?</p>
<p>The data in OpenStreetMap is continuously updated. This page shows how much of each county has been mapped in townlands, baronies and civil parishes</p>

<a name="countyprogress"></a>
<table id=coverage>
    <thead>
        <td>County</td>
        <td colspan=2>Townlands</td>
        <td colspan=2>Baronies</td>
        <td colspan=2>Civil Parishes</td>
    </thead>
    <tbody>
        <tr>
            <td>All Ireland</td>
            <td>{{ townland_progress|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ townland_progress }}></progress></td>
            <td>{{ barony_progress|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ barony_progress }}></progress></td>
            <td>{{ civil_parish_progress|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ civil_parish_progress }}></progress></td>
        </tr>
    {% for county in counties %}
        <tr>
            <td><a href="{% url view_area county.url_path %}">{{ county.name }}</a></td>
            <td>{{ county.townland_cover|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ county.townland_cover }}></progress></td>
            <td>{{ county.barony_cover|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ county.barony_cover }}></progress></td>
            <td>{{ county.civil_parish_cover|floatformat:-1 }}%</td><td><progress min=0 max=100 value={{ county.civil_parish_cover }}></progress></td>
        </tr>
    {% endfor %}

    </tbody>
</table>

<a name="duplicatenames"></a>
<h2>Duplicate Townland Name</h2>
<ul>
    {% for group in duplicate_townland_names %}
    <li>{{ group.name }}: {{ group.count }}
        <ul>
            {% for townland in group.townlands %}
            <li><a href="{% url view_area townland.url_path %}">{{ group.name }}</a> in {% if townland.civil_parish__name %}{{ townland.civil_parish__name }} Civil Parish,{% endif %} {% if townland.barony__name %}{{ townland.barony__name }} Barony,{% endif %} Co. {{ townland.county__name }}</li>
            {% endfor %}
        </ul>
    </li>
    {% endfor %}
</ul>

<h2><a name=errors></a>Potential conflicts with the data</h2>

<ul>
    {% for error in errors %}
        <li>{{ error }}</li>
    {% empty %}
        <li><i>No Errors, data is good! üòÅ</i></li>
    {% endfor %}
</ul>

{% endcache %}
{% endblock %}
